Вопросы по буферному кешу, журналу и WAL
1. Что такое shared_buffers в PostgreSQL?
a) Кэш на уровне операционной системы для файлов БД
b) Общая память для кэширования блоков данных между процессами
c) Буфер для временных таблиц и сортировок
d) Кэш для WAL-файлов
Правильный ответ: b

2. Какой процент от общей памяти обычно рекомендуется для shared_buffers?
a) 10-25%
b) 25-40%
c) 50-75%
d) 75-90%
Правильный ответ: a

3. Что происходит при "double buffering" в PostgreSQL?
a) Данные кэшируются и в shared_buffers, и в OS cache
b) WAL-записи дублируются для надежности
c) Каждая страница хранится в двух экземплярах
d) Буферы кэшируются на двух уровнях
Правильный ответ: a

4. Какой процесс отвечает за запись "грязных" страниц на диск?
a) Background Writer
b) Checkpointer
c) WAL Writer
d) Autovacuum Launcher
Правильный ответ: a

5. Что такое WAL (Write-Ahead Logging) в PostgreSQL?
a) Метод журналирования, при котором изменения записываются в лог до обновления данных
b) Лог для отслеживания операций записи
c) Архивный лог для восстановления
d) Лог изменений схемы БД
Правильный ответ: a

6. Какой процесс отвечает за запись WAL буферов на диск?
a) WAL Writer
b) Checkpointer
c) Background Writer
d) Logger Process
Правильный ответ: a

7. Что делает процесс Checkpointer?
a) Записывает все "грязные" буферы на диск и создает контрольную точку
b) Проверяет целостность данных
c) Создает контрольные точки в WAL
d) Мониторит состояние буферов
Правильный ответ: a

8. Какой параметр определяет интервал между автоматическими контрольными точками?
a) checkpoint_timeout
b) checkpoint_interval
c) wal_checkpoint_timeout
d) checkpoint_frequency
Правильный ответ: a

9. Что такое "грязная страница" (dirty page) в контексте буферного кеша?
a) Страница, измененная в памяти, но не записанная на диск
b) Страница с поврежденными данными
c) Страница, содержащая удаленные кортежи
d) Страница в процессе чтения с диска
Правильный ответ: a

10. Какой параметр определяет максимальный размер WAL перед принудительной контрольной точкой?
a) max_wal_size
b) wal_max_size
c) checkpoint_segments
d) wal_keep_segments
Правильный ответ: a

11. Что такое WAL segment в PostgreSQL?
a) Файл фиксированного размера (обычно 16MB) для хранения WAL-записей
b) Часть WAL-буфера в памяти
c) Логическая единица WAL-потока
d) Сегмент архивированного WAL
Правильный ответ: a

12. Какой параметр определяет размер WAL-буферов?
a) wal_buffers
b) shared_wal_buffers
c) wal_cache_size
d) wal_memory
Правильный ответ: a

13. Что означает параметр synchronous_commit?
a) Определяет, когда сервер сообщает об успешном завершении транзакции
b) Включает/выключает синхронную запись WAL
c) Определяет режим синхронной репликации
d) Управляет синхронной записью данных
Правильный ответ: a

14. Какое значение synchronous_commit обеспечивает наибольшую надежность?
a) on
b) off
c) local
d) remote_write
Правильный ответ: a

15. Что такое Full Page Writes?
a) Запись полных страниц в WAL при первом изменении после контрольной точки
b) Запись всех страниц таблицы при изменении
c) Метод сжатия WAL
d) Режим полного журналирования
Правильный ответ: a

16. Какой параметр управляет записью полных страниц в WAL?
a) full_page_writes
b) wal_full_page
c) enable_full_page_writes
d) log_full_pages
Правильный ответ: a

17. Что происходит при включении wal_compression?
a) Сжимаются полные страницы в WAL
b) Сжимаются все WAL-файлы
c) Включается сжатие WAL-сегментов
d) Сжимаются WAL-буферы в памяти
Правильный ответ: a

18. Какой процесс отвечает за архивирование WAL-файлов?
a) Archiver Process
b) WAL Writer
c) Checkpointer
d) Background Writer
Правильный ответ: a

19. Какой параметр включает архивирование WAL?
a) archive_mode
b) wal_archive
c) archive_wal
d) enable_archive
Правильный ответ: a

20. Что определяет параметр archive_command?
a) Команду для архивирования завершенных WAL-сегментов
b) Команду для восстановления из архива
c) Настройки архиватора
d) Путь к архиву WAL
Правильный ответ: a

21. Какой параметр определяет максимальное количество WAL-сегментов, сохраняемых для репликации?
a) wal_keep_size
b) max_wal_senders
c) wal_keep_segments
d) wal_retention_size
Правильный ответ: a

22. Что такое WAL sender process?
a) Процесс, отправляющий WAL-данные на реплики
b) Процесс записи WAL на диск
c) Процесс архивирования WAL
d) Процесс мониторинга WAL
Правильный ответ: a

23. Какой параметр определяет максимальное количество WAL sender процессов?
a) max_wal_senders
b) max_replication_processes
c) wal_max_senders
d) max_wal_streams
Правильный ответ: a

24. Что такое buffer cache hit ratio?
a) Отношение количества попаданий в кэш к общему количеству обращений
b) Скорость очистки буферов
c) Эффективность использования shared_buffers
d) Коэффициент заполнения буферного кеша
Правильный ответ: a

25. Как посмотреть статистику использования буферного кеша?
a) pg_stat_database
b) pg_buffercache
c) pg_buffer_stats
d) SHOW buffer_stats
Правильный ответ: a

26. Что делает параметр bgwriter_delay?
a) Определяет задержку между циклами фоновой записи
b) Задержку перед записью грязных страниц
c) Таймаут для background writer
d) Интервал проверки буферов
Правильный ответ: a

27. Какой параметр управляет количеством буферов, записываемых за один цикл background writer?
a) bgwriter_lru_maxpages
b) bgwriter_maxpages
c) bgwriter_buffer_limit
d) bgwriter_flush_maxpages
Правильный ответ: a

28. Что такое checkpoint_completion_target?
a) Целевое время завершения контрольной точки в пределах интервала
b) Целевое количество страниц для контрольной точки
c) Цель по времени восстановления
d) Целевая производительность контрольной точки
Правильный ответ: a

29. Какой параметр включает ведение лога контрольных точек?
a) log_checkpoints
b) checkpoint_log
c) log_checkpoint_events
d) checkpoint_debug
Правильный ответ: a

30. Что такое wal_level и какие значения он может принимать?
a) Уровень журналирования WAL: minimal, replica, logical
b) Уровень сжатия WAL
c) Уровень надежности WAL
d) Уровень производительности WAL
Правильный ответ: a

31. При каком wal_level возможна логическая репликация?
a) logical
b) replica
c) minimal
d) archive
Правильный ответ: a

32. Что такое WAL receiver process?
a) Процесс на реплике, получающий WAL-данные от мастера
b) Процесс приема WAL-архивов
c) Процесс чтения WAL для восстановления
d) Процесс мониторинга WAL-потока
Правильный ответ: a

33. Какой параметр определяет таймаут для WAL sender/receiver процессов?
a) wal_sender_timeout / wal_receiver_timeout
b) replication_timeout
c) wal_stream_timeout
d) replication_wal_timeout
Правильный ответ: a

34. Что такое replication slot?
a) Объект, гарантирующий сохранение WAL до получения репликой
b) Слот для репликационного соединения
c) Ограничение на количество реплик
d) Буфер для репликационных данных
Правильный ответ: a

35. Какой параметр определяет максимальное количество слотов репликации?
a) max_replication_slots
b) max_wal_slots
c) replication_slot_limit
d) wal_slot_max
Правильный ответ: a

36. Что происходит при переполнении WAL?
a) Запускается экстренная контрольная точка
b) Сервер переходит в режим read-only
c) Останавливаются операции записи
d) WAL-файлы сжимаются
Правильный ответ: a

37. Какой параметр управляет задержкой WAL writer между сбросами буферов?
a) wal_writer_delay
b) wal_flush_delay
c) wal_writer_interval
d) wal_buffer_flush_delay
Правильный ответ: a

38. Что такое effective_io_concurrency?
a) Ожидаемое количество параллельных операций I/O
b) Максимальная concurrent-загрузка данных
c) Уровень параллелизма для фоновой записи
d) Количество одновременных операций WAL
Правильный ответ: a

39. Как посмотреть текущую позицию в WAL?
a) SELECT pg_current_wal_lsn()
b) SELECT pg_current_wal_location()
c) SHOW wal_position
d) SELECT current_wal_lsn()
Правильный ответ: a

40. Что такое LSN (Log Sequence Number) в PostgreSQL?
a) Уникальный идентификатор позиции в WAL-потоке
b) Номер последовательности логов
c) Идентификатор контрольной точки
d) Номер сегмента WAL
Правильный ответ: a

41. Какой параметр управляет размером временных буферов?
a) temp_buffers
b) work_mem
c) temp_buffer_size
d) session_buffers
Правильный ответ: a

42. Что происходит при нехватке shared_buffers?
a) PostgreSQL использует OS cache и временные файлы
b) Операции записи блокируются
c) Сервер аварийно завершает работу
d) Включается аварийный режим
Правильный ответ: a

43. Какой параметр определяет стратегию очистки буферов?
a) bgwriter_lru_multiplier
b) buffer_cleanup_strategy
c) lru_cleanup_factor
d) bgwriter_strategy
Правильный ответ: a

44. Что такое WAL recycling?
a) Переиспользование старых WAL-сегментов после контрольной точки
b) Очистка WAL-буферов
c) Сжатие WAL-файлов
d) Повторное использование WAL-записей
Правильный ответ: a

45. Какой параметр включает ведение лога изменений WAL?
a) wal_debug
b) log_wal
c) wal_log
d) debug_wal
Правильный ответ: a

46. Что такое commit_delay и commit_siblings?
a) Параметры групповой коммита транзакций
b) Задержки для синхронной репликации
c) Таймауты для операций коммита
d) Настройки отложенного коммита
Правильный ответ: a

47. Как мониторить производительность WAL?
a) Через pg_stat_wal
b) pg_wal_stats
c) SHOW wal_performance
d) pg_stat_database.wal_metrics
Правильный ответ: a

48. Что такое wal_init_zero?
a) Инициализация WAL-сегментов нулями при создании
b) Сброс WAL-буферов
c) Очистка WAL при запуске
d) Инициализация WAL-позиции
Правильный ответ: a

49. Какой параметр управляет синхронной репликацией?
a) synchronous_standby_names
b) sync_replication
c) synchronous_replicas
d) sync_standby_list
Правильный ответ: a

50. Что происходит при потере WAL-сегментов?
a) Возможна потеря данных и необходимость восстановления из резервной копии
b) Автоматическое пересоздание WAL
c) Сервер останавливается до восстановления
d) Используются архивные копии WAL
Правильный ответ: a