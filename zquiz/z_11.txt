Вопросы по буферному кешу, WAL и контрольным точкам
1. Что такое shared_buffers в PostgreSQL?
a) Кэш на уровне операционной системы
b) Общая память для кэширования блоков данных между процессами
c) Буфер для временных таблиц
d) Кэш для WAL-файлов
Правильный ответ: b

2. Какой алгоритм вытеснения используется в буферном кеше PostgreSQL?
a) LRU (Least Recently Used)
b) Clock-sweep
c) FIFO (First In First Out)
d) MRU (Most Recently Used)
Правильный ответ: b

3. Какой процесс отвечает за запись "грязных" страниц на диск?
a) Checkpointer
b) Background Writer
c) WAL Writer
d) Autovacuum Launcher
Правильный ответ: b

4. Что такое WAL (Write-Ahead Logging) в PostgreSQL?
a) Метод журналирования, при котором изменения записываются в лог до обновления данных
b) Лог для отслеживания операций записи
c) Архивный лог для восстановления
d) Лог изменений схемы БД
Правильный ответ: a

5. Какой процесс создает контрольные точки?
a) Checkpointer
b) Background Writer
c) WAL Writer
d) Logger Process
Правильный ответ: a

6. Что такое "грязная страница" (dirty page)?
a) Страница, измененная в памяти, но не записанная на диск
b) Страница с поврежденными данными
c) Страница, содержащая удаленные кортежи
d) Страница в процессе чтения с диска
Правильный ответ: a

7. Какой параметр определяет интервал между автоматическими контрольными точками?
a) checkpoint_timeout
b) checkpoint_interval
c) wal_checkpoint_timeout
d) checkpoint_frequency
Правильный ответ: a

8. Что такое WAL segment?
a) Файл фиксированного размера (обычно 16MB) для хранения WAL-записей
b) Часть WAL-буфера в памяти
c) Логическая единица WAL-потока
d) Сегмент архивированного WAL
Правильный ответ: a

9. Какой параметр определяет размер WAL-буферов?
a) wal_buffers
b) shared_wal_buffers
c) wal_cache_size
d) wal_memory
Правильный ответ: a

10. Что означает параметр synchronous_commit = on?
a) Сервер ждет записи WAL на диск перед подтверждением коммита
b) Сервер ждет применения WAL на реплике
c) Сервер использует синхронную репликацию
d) Сервер ждет записи данных на диск
Правильный ответ: a

11. Какой процесс отвечает за запись WAL буферов на диск?
a) WAL Writer
b) Checkpointer
c) Background Writer
d) Logger Process
Правильный ответ: a

12. Что такое Full Page Writes?
a) Запись полных страниц в WAL при первом изменении после контрольной точки
b) Запись всех страниц таблицы при изменении
c) Метод сжатия WAL
d) Режим полного журналирования
Правильный ответ: a

13. Какой параметр управляет записью полных страниц в WAL?
a) full_page_writes
b) wal_full_page
c) enable_full_page_writes
d) log_full_pages
Правильный ответ: a

14. Что происходит при включении wal_compression?
a) Сжимаются полные страницы в WAL
b) Сжимаются все WAL-файлы
c) Включается сжатие WAL-сегментов
d) Сжимаются WAL-буферы в памяти
Правильный ответ: a

15. Какой процесс отвечает за архивирование WAL-файлов?
a) Archiver Process
b) WAL Writer
c) Checkpointer
d) Background Writer
Правильный ответ: a

16. Что определяет параметр archive_command?
a) Команду для архивирования завершенных WAL-сегментов
b) Команду для восстановления из архива
c) Настройки архиватора
d) Путь к архиву WAL
Правильный ответ: a

17. Какой параметр определяет максимальный размер WAL перед принудительной контрольной точкой?
a) max_wal_size
b) wal_max_size
c) checkpoint_segments
d) wal_keep_segments
Правильный ответ: a

18. Что такое WAL sender process?
a) Процесс, отправляющий WAL-данные на реплики
b) Процесс записи WAL на диск
c) Процесс архивирования WAL
d) Процесс мониторинга WAL
Правильный ответ: a

19. Какой параметр определяет максимальное количество WAL sender процессов?
a) max_wal_senders
b) max_replication_processes
c) wal_max_senders
d) max_wal_streams
Правильный ответ: a

20. Что такое buffer cache hit ratio?
a) Отношение количества попаданий в кэш к общему количеству обращений
b) Скорость очистки буферов
c) Эффективность использования shared_buffers
d) Коэффициент заполнения буферного кеша
Правильный ответ: a

21. Как посмотреть статистику использования буферного кеша?
a) pg_stat_database
b) pg_buffercache
c) pg_buffer_stats
d) SHOW buffer_stats
Правильный ответ: a

22. Что делает параметр bgwriter_delay?
a) Определяет задержку между циклами фоновой записи
b) Задержку перед записью грязных страниц
c) Таймаут для background writer
d) Интервал проверки буферов
Правильный ответ: a

23. Какой параметр управляет количеством буферов, записываемых за один цикл background writer?
a) bgwriter_lru_maxpages
b) bgwriter_maxpages
c) bgwriter_buffer_limit
d) bgwriter_flush_maxpages
Правильный ответ: a

24. Что такое checkpoint_completion_target?
a) Целевое время завершения контрольной точки в пределах интервала
b) Целевое количество страниц для контрольной точки
c) Цель по времени восстановления
d) Целевая производительность контрольной точки
Правильный ответ: a

25. Какой параметр включает ведение лога контрольных точек?
a) log_checkpoints
b) checkpoint_log
c) log_checkpoint_events
d) checkpoint_debug
Правильный ответ: a

26. Что такое wal_level и какие значения он может принимать?
a) Уровень журналирования WAL: minimal, replica, logical
b) Уровень сжатия WAL
c) Уровень надежности WAL
d) Уровень производительности WAL
Правильный ответ: a

27. При каком wal_level возможна логическая репликация?
a) logical
b) replica
c) minimal
d) archive
Правильный ответ: a

28. Что такое WAL receiver process?
a) Процесс на реплике, получающий WAL-данные от мастера
b) Процесс приема WAL-архивов
c) Процесс чтения WAL для восстановления
d) Процесс мониторинга WAL-потока
Правильный ответ: a

29. Какой параметр определяет таймаут для WAL sender/receiver процессов?
a) wal_sender_timeout / wal_receiver_timeout
b) replication_timeout
c) wal_stream_timeout
d) replication_wal_timeout
Правильный ответ: a

30. Что такое replication slot?
a) Объект, гарантирующий сохранение WAL до получения репликой
b) Слот для репликационного соединения
c) Ограничение на количество реплик
d) Буфер для репликационных данных
Правильный ответ: a

31. Какой параметр определяет максимальное количество слотов репликации?
a) max_replication_slots
b) max_wal_slots
c) replication_slot_limit
d) wal_slot_max
Правильный ответ: a

32. Что происходит при переполнении WAL?
a) Запускается экстренная контрольная точка
b) Сервер переходит в режим read-only
c) Останавливаются операции записи
d) WAL-файлы сжимаются
Правильный ответ: a

33. Какой параметр управляет задержкой WAL writer между сбросами буферов?
a) wal_writer_delay
b) wal_flush_delay
c) wal_writer_interval
d) wal_buffer_flush_delay
Правильный ответ: a

34. Что такое effective_io_concurrency?
a) Ожидаемое количество параллельных операций I/O
b) Максимальная concurrent-загрузка данных
c) Уровень параллелизма для фоновой записи
d) Количество одновременных операций WAL
Правильный ответ: a

35. Как посмотреть текущую позицию в WAL?
a) SELECT pg_current_wal_lsn()
b) SELECT pg_current_wal_location()
c) SHOW wal_position
d) SELECT current_wal_lsn()
Правильный ответ: a

36. Что такое LSN (Log Sequence Number) в PostgreSQL?
a) Уникальный идентификатор позиции в WAL-потоке
b) Номер последовательности логов
c) Идентификатор контрольной точки
d) Номер сегмента WAL
Правильный ответ: a

37. Какой параметр управляет размером временных буферов?
a) temp_buffers
b) work_mem
c) temp_buffer_size
d) session_buffers
Правильный ответ: a

38. Что происходит при нехватке shared_buffers?
a) PostgreSQL использует OS cache и временные файлы
b) Операции записи блокируются
c) Сервер аварийно завершает работу
d) Включается аварийный режим
Правильный ответ: a

39. Какой параметр определяет стратегию очистки буферов?
a) bgwriter_lru_multiplier
b) buffer_cleanup_strategy
c) lru_cleanup_factor
d) bgwriter_strategy
Правильный ответ: a

40. Что такое WAL recycling?
a) Переиспользование старых WAL-сегментов после контрольной точки
b) Очистка WAL-буферов
c) Сжатие WAL-файлов
d) Повторное использование WAL-записей
Правильный ответ: a

41. Какой параметр включает ведение лога изменений WAL?
a) wal_debug
b) log_wal
c) wal_log
d) debug_wal
Правильный ответ: a

42. Что такое commit_delay и commit_siblings?
a) Параметры групповой коммита транзакций
b) Задержки для синхронной репликации
c) Таймауты для операций коммита
d) Настройки отложенного коммита
Правильный ответ: a

43. Как мониторить производительность WAL?
a) Через pg_stat_wal
b) pg_wal_stats
c) SHOW wal_performance
d) pg_stat_database.wal_metrics
Правильный ответ: a

44. Что такое wal_init_zero?
a) Инициализация WAL-сегментов нулями при создании
b) Сброс WAL-буферов
c) Очистка WAL при запуске
d) Инициализация WAL-позиции
Правильный ответ: a

45. Какой параметр управляет синхронной репликацией?
a) synchronous_standby_names
b) sync_replication
c) synchronous_replicas
d) sync_standby_list
Правильный ответ: a

46. Что происходит при потере WAL-сегментов?
a) Возможна потеря данных и необходимость восстановления из резервной копии
b) Автоматическое пересоздание WAL
c) Сервер останавливается до восстановления
d) Используются архивные копии WAL
Правильный ответ: a

47. Какой процесс отвечает за сбор статистики использования буферов?
a) Stats Collector
b) Background Writer
c) Checkpointer
d) WAL Writer
Правильный ответ: a

48. Что такое "буферный дескриптор" в PostgreSQL?
a) Структура данных, описывающая состояние буфера в памяти
b) Дескриптор файла буферного кеша
c) Идентификатор буферного пула
d) Метка буферной страницы
Правильный ответ: a

49. Какой параметр определяет частоту сброса WAL-буферов?
a) wal_writer_delay
b) wal_writer_flush_after
c) wal_flush_delay
d) wal_buffer_flush_interval
Правильный ответ: a

50. Что такое "контрольная сумма страниц" в PostgreSQL?
a) CRC-чексумма для обнаружения повреждений данных
b) Сумма контрольных точек
c) Проверка целостности WAL
d) Контрольная сумма буферного кеша
Правильный ответ: a